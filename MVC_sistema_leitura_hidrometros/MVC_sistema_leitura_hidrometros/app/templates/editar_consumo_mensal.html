{% extends "base.html" %}

{% block title %}Editar Consumo Mensal - Sistema de Leitura de Hidrômetros{% endblock %}

{% block content %}
    <h1>Editar Consumo Mensal</h1>

    <form action="{{ url_for('editar_consumo_mensal', consumo_id=consumo.id_consumo) }}" method="POST" class="form-add-edit">
        <div class="form-group">
            <label for="cliente_nome">Cliente:</label>
            <input type="text" id="cliente_nome" name="cliente_nome" value="{{ consumo.cliente.nome if consumo.cliente else 'N/A' }}" disabled>
        </div>
        <div class="form-group">
            <label for="mes_referencia">Mês de Referência:</label>
            <input type="date" id="mes_referencia" name="mes_referencia" value="{{ consumo.mes_referencia.strftime('%Y-%m-%d') }}" disabled>
        </div>
        <div class="form-group">
            <label for="litros_consumidos">Litros Consumidos:</label>
            <input type="number" step="0.01" id="litros_consumidos" name="litros_consumidos" value="{{ "%.2f" | format(consumo.litros_consumidos) }}" required>
        </div>
        <div class="form-group">
            <label for="tarifa_aplicada_id">Tarifa Aplicada (Opcional para Cálculo):</label>
            <select id="tarifa_aplicada_id" name="tarifa_aplicada_id">
                <option value="">Selecione uma Tarifa</option>
                {% for tarifa in tarifas %}
                    <option value="{{ tarifa.id_tarifa }}" {% if tarifa.id_tarifa == consumo.tarifa_aplicada_id %}selected{% endif %}>
                        {{ tarifa.nome_tarifa }} (R$ {{ "%.2f" | format(tarifa.valor_m3) }}/m³)
                    </option>
                {% endfor %}
            </select>
        </div>
        <button type="submit" class="btn btn-primary"><i class="fas fa-save"></i> Salvar Alterações</button>
        <a href="{{ url_for('listar_consumos_mensais') }}" class="btn btn-secondary"><i class="fas fa-arrow-left"></i> Voltar</a>
    </form>
{% endblock %}
